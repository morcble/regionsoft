<!DOCTYPE html> 
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<script src="/RegionFrontend/js/config.js"></script>
	
		<meta http-equiv="cache-control" content="no-cache">
		<meta http-equiv="expires" content="0">
		<meta http-equiv="pragma" content="no-cache">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>RegionSoft Sample System</title>
		<script src="/RegionFrontend/js/jquery-3.1.1.min.js"></script>
		<script src="/RegionFrontend/js/dropdown.js"></script>

	
		<link href="/RegionFrontend/css/skin1/bootstrap.min.css" rel="stylesheet" />		
		<link href="/RegionFrontend/css/skin1/regionframe.css" rel="stylesheet" />
		<link href="/RegionFrontend/css/skin1/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />	
		<script src="/RegionFrontend/messages/global_msg.js"></script>
		
		<script src="/RegionFrontend/js/region-0.3.1.min.js"></script>
	</head>


<body>

<div class="popUpCoverParent">
	<!-- popup dialog begin -->
	<div id="popUpCover" class="popup_cover_div">
		<div id="popUpDialog" class="dialog_div">
			<div class="popViewDiv">
				
				<div id="popUpProgress" class="dialog_progress">
					<div class="spin-loading spin-lg"></div>
				</div>
				
				<!-- two style with css: popup-normal, popup-regionHeader -->
				<div class="popUpDiv popup-normal" style="border: 5px solid transparent; min-width: 200px;">
					<div class="popup-header-region">
						<span class="logo-region"></span>
						<span class="header-label">
							RegionSoft Sample System
						</span>
						
					</div>
					
					<div class="panel panel-default">
						<div class="panel-heading clearfix" style="min-height: 29px;">
							<div class="popUpTitle pull-left"></div>
							<button class="btn btn-default pull-right" onclick="closeModalWindow()">
								<span class="glyphicon glyphicon-remove"></span>
							</button>
						</div>
						<div class="panel-body">
							<div class="popup-validate-info">
								<ul class="template error">
									<li class="template"></li>
								</ul>
								<ul class="template success">
									<li class="template"></li>
								</ul>
							</div>
							<iframe id="popupContentIframe" frameborder="no" style="min-width: 180px;"></iframe>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div> 
	<!-- popup dialog end -->
	
	<!-- loading cover begin -->
	<div id="loadingDiv" class="cover_div hide">
		<div id="loadingContent" class="dialog_progress hide">
			<div class="spin-loading spin-lg"></div>
		</div>
	</div> 
	<!-- loading cover end -->
</div>
<script src="/RegionFrontend/messages/dictionary_msg.js"></script>
	<div id="region-form" class="hide">
				<input region-attr="id" class="region-editable" type="hidden">
				<input region-attr="version" class="region-editable" type="hidden">
    			
					<div class="panel panel-default" style="margin-bottom: 0;">
						<div class="panel-heading">
						    <i class="fa fa-fw fa-minus fa-lg collapsePanel"></i>
							<span>Region Form</span>
						</div>
						<div class="panel-body">
							<div class="row">
									<div class="col-xs-2 data-label-normal">
										<span class="mandatoryIcon"></span><message key="dictionary_msg.valType"/>:
									</div> 
									<div class="col-xs-4">	
										<input type="text" region-attr="valType" class="form-control region-editable"  maxlength="20">	
									</div>
							</div>
							<div class="row">
									<div class="col-xs-2 data-label-normal">
										<span class="mandatoryIcon"></span><message key="dictionary_msg.valTypeDesc"/>:
									</div> 
									<div class="col-xs-4">	
										<input type="text" region-attr="valTypeDesc" class="form-control region-editable"  maxlength="50">
									</div>
							</div>
							
							<div class="row">
									<div class="col-xs-2 data-label-normal">
										<span class="mandatoryIcon"></span><message key="dictionary_msg.city"/>:
									</div> 
									<div class="col-xs-4 data-label-multiline">
										<label class="col-xs-4 data-label-checkbox">	
										<select class="region-editable form-control" region-attr="city" dataLs="CITY"/>							
										</select>	
									</div>
							</div>
							
							<div class="row">
									<div class="col-xs-2 data-label-normal">
										<span class="mandatoryIcon"></span><message key="dictionary_msg.province"/>:
									</div> 
									<div class="col-xs-4 data-label-multiline">
											<label class="col-xs-4 data-label-checkbox">
												<input type="checkbox" class="region-editable" region-attr="province"  dataLs="PROVINCE" multiple="multiple" />							
											</label>
									</div>
							</div>
							
							
												
							<div class="row">
								<div class="col-xs-2 data-label-normal">
									Created Date:
								</div>
								<div class="col-xs-4">
									<span region-attr="createDt"></span>
								</div>
							</div>
							
							<div class="row">
								<div class="col-xs-2 data-label-normal">
									Created By:
								</div>
								<div class="col-xs-4">
									<span region-attr="createBy"></span>
								</div>
							</div>
							
							<div class="row">
								<div class="col-xs-2 data-label-normal">
									Update Date:
								</div>
								<div class="col-xs-4">
									<span region-attr="updateDt"></span>
								</div>
							</div>
							
							<div class="row">
								<div class="col-xs-2 data-label-normal">
									Update By:
								</div>
								<div class="col-xs-4">
									<span region-attr="updateBy"></span>
								</div>
							</div>
							
							<div class="row">
								<div class="col-xs-12 ctrolTr" style="text-align: center; margin-bottom: 15px;">
									<button class="btn btn-default" onclick="dictionaryview2.refreshRegion(event)">Refresh</button>
									<button class="btn btn-default" onclick="dictionaryview2.saveRegion(event)">Save</button>
									<button class="btn btn-default" onclick="dictionaryview2.cancel(event)">Cancel</button>
								</div>
							</div>
						</div>
					</div>	
			
	<div id="restLoadRegion">
		<input type="button" value="subChild" onclick="testloadRegion()"/>
	</div>
</div>



<script type="text/javascript">
	function testloadRegion(){
		var def = Region.loadRegion($("#restLoadRegion"),"/region-html/dictionary/dictionaryviewcomp.html?recordId=6",null);
		def.done(function(region){
			console.log(region)
		});
	}

	$(document).ready(function(){ 
		var formParas = new Array("valType","valTypeDesc");
		var regArray = new Array(new Array(emptyReg),new Array(emptyReg));
		var errorMsgArray = new Array(new Array("Mandatory Field"),new Array("Mandatory Field"));
		var regionForm = new RegionForm("#region-form",formParas,regArray,errorMsgArray,"customizedid");
		
		regionForm.resUrl = backendPath+"/zxc/spirit/dictionary/";
		regionForm.overridenResUrl = null;
		regionForm.saveSuccessCallBack = dictionaryview2.saveSuccessCallBack;
		regionForm.saveFailedCallBack = dictionaryview2.saveFailedCallBack;
			
		regionForm.beforeRetrieveData = dictionaryview2.beforeRetrieveData;
		regionForm.afterRetrieveData = dictionaryview2.afterRetrieveData;
		regionForm.beforeRenderData = dictionaryview2.beforeRenderData;
		regionForm.afterRenderData = dictionaryview2.afterRenderData;
		regionForm.beforeValidate = dictionaryview2.beforeValidate;
		
		regionForm.renderRegion();
	});  
	
	var dictionaryview2 = {
			saveRegion:function(event){
				var tmpRegion = Region.getRegionContainerByEvent(event);
				tmpRegion.saveOrUpdateRegion();
			},
			refreshRegion:function(event){
				var tmpRegion = Region.getRegionContainerByEvent(event);
				tmpRegion.refreshRegion();
			},
			saveSuccessCallBack:function(){
				alert("save successfully");
			},
			saveFailedCallBack:function(){
				console.log("save failed");
			},
			cancel:function(event){
				var tmpRegion = Region.getRegionContainerByEvent(event);
				jqueryConfirm(getMsg("global_msg.cancel_confirm"),
						function(){
							console.log("y")
						},
						function(){
							console.log("n")
						});
			},
			/*
			it will block form data submission if return value is false
			*/
			beforeValidate:function(){
				return true;
			},
			beforeRetrieveData:function(){
				loadingStart();
			},
			afterRetrieveData:function(){
				
			},
			beforeRenderData:function(){
			},
			afterRenderData:function(){
				loadingComplete();
			}
	}
	
	
	
</script>

</body>
</html>

